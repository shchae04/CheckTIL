# PR (Pull Request)란 무엇인가요?

## 정의

PR(Pull Request)은 버전 관리 시스템에서 코드 변경사항을 메인 코드베이스에 병합하기 전에 검토를 요청하는 메커니즘입니다. 주로 GitHub, GitLab, Bitbucket과 같은 Git 호스팅 서비스에서 사용되며, 코드 품질 관리와 협업을 위한 핵심 기능입니다.

## PR의 목적과 이점

PR은 다음과 같은 여러 목적과 이점을 제공합니다:

1. **코드 리뷰**: 다른 개발자들이 변경사항을 검토하여 버그, 보안 문제, 코드 스타일 등을 확인할 수 있습니다.
2. **지식 공유**: 팀원들이 서로의 코드를 검토하면서 지식을 공유하고 학습할 수 있습니다.
3. **품질 보증**: 여러 사람의 검토를 거치면서 코드 품질을 높일 수 있습니다.
4. **협업 강화**: 개발자들 간의 소통과 협업을 촉진합니다.
5. **변경 이력 관리**: 각 변경사항에 대한 명확한 기록과 문서화를 제공합니다.

## PR의 작동 방식

PR은 다음과 같은 기본 원리로 작동합니다:

1. **브랜치 생성**: 개발자는 메인 브랜치(보통 `main` 또는 `master`)에서 새로운 브랜치를 생성합니다.
2. **코드 변경**: 새 브랜치에서 필요한 코드 변경을 수행합니다.
3. **변경사항 커밋 및 푸시**: 변경사항을 커밋하고 원격 저장소에 푸시합니다.
4. **PR 생성**: 원격 저장소에서 PR을 생성하여 변경사항을 메인 브랜치에 병합하도록 요청합니다.
5. **코드 리뷰**: 다른 개발자들이 변경사항을 검토하고 피드백을 제공합니다.
6. **수정 및 토론**: 필요한 경우 피드백에 따라 코드를 수정하고 토론합니다.
7. **병합**: 모든 검토가 완료되면 변경사항이 메인 브랜치에 병합됩니다.

## PR 워크플로우 예시

### GitHub에서 PR 생성하기

1. **브랜치 생성 및 체크아웃**:
   ```bash
   git checkout -b feature/new-feature
   ```

2. **코드 변경 및 커밋**:
   ```bash
   # 파일 수정 후
   git add .
   git commit -m "Add new feature"
   ```

3. **원격 저장소에 푸시**:
   ```bash
   git push origin feature/new-feature
   ```

4. **GitHub에서 PR 생성**:
   - GitHub 저장소 페이지로 이동
   - "Compare & pull request" 버튼 클릭
   - PR 제목과 설명 작성
   - "Create pull request" 버튼 클릭

### PR 리뷰 및 병합

1. **리뷰어 지정**: PR에 리뷰어를 지정하여 코드 검토를 요청합니다.
2. **코드 리뷰**: 리뷰어는 코드를 검토하고 코멘트를 남깁니다.
3. **토론 및 수정**: 필요한 경우 토론하고 코드를 수정합니다.
4. **승인**: 리뷰어가 변경사항을 승인합니다.
5. **병합**: "Merge pull request" 버튼을 클릭하여 변경사항을 메인 브랜치에 병합합니다.

## PR 작성 시 모범 사례

효과적인 PR을 작성하기 위한 몇 가지 모범 사례:

1. **명확한 제목과 설명**: PR의 목적과 변경사항을 명확하게 설명합니다.
2. **작은 단위로 나누기**: 큰 변경사항은 여러 개의 작은 PR로 나누어 검토하기 쉽게 만듭니다.
3. **관련 이슈 연결**: 관련된 이슈나 티켓을 PR 설명에 연결합니다.
4. **자체 검토**: PR을 제출하기 전에 스스로 코드를 검토합니다.
5. **테스트 결과 포함**: 변경사항이 테스트를 통과했는지 확인하고 결과를 포함합니다.

## 주요 Git 호스팅 서비스별 PR 특징

각 Git 호스팅 서비스는 PR 기능에 약간의 차이가 있습니다:

### GitHub
- "Pull Request"라는 용어 사용
- 코드 리뷰, 토론, CI/CD 통합 기능 제공
- 자동 병합 충돌 감지 및 해결 도구 제공

### GitLab
- "Merge Request"라는 용어 사용
- 내장된 CI/CD 파이프라인과 통합
- 승인 규칙 및 코드 품질 게이트 설정 가능

### Bitbucket
- "Pull Request"라는 용어 사용
- Jira와의 긴밀한 통합
- 빌드 상태 표시 및 자동 병합 기능

### Gitea
- "Pull Request"라는 용어 사용
- 오픈 소스 셀프 호스팅 Git 서비스
- 가볍고 리소스 사용이 적음
- GitHub와 유사한 인터페이스와 기능 제공

## Gitea에서 PR 생성 및 관리하기

Gitea는 셀프 호스팅 가능한 오픈 소스 Git 서비스로, GitHub와 유사한 인터페이스를 제공합니다. 다음은 Gitea에서 PR을 생성하고 관리하는 방법입니다.

### Gitea에서 PR 생성하기

1. **브랜치 생성 및 작업**:
   ```bash
   git checkout -b feature/my-new-feature
   # 코드 변경 작업
   git add .
   git commit -m "Add my new feature"
   git push origin feature/my-new-feature
   ```

2. **Gitea 웹 인터페이스에서 PR 생성**:
   - Gitea 저장소 페이지로 이동합니다.
   - 상단 메뉴에서 "Pull Requests" 탭을 클릭합니다.
   - 오른쪽 상단의 "New Pull Request" 버튼을 클릭합니다.
   - 소스 브랜치(방금 생성한 feature 브랜치)와 대상 브랜치(보통 main 또는 master)를 선택합니다.
   - "Compare" 버튼을 클릭하여 변경사항을 확인합니다.
   - PR 제목과 설명을 작성합니다.
   - "Create Pull Request" 버튼을 클릭합니다.

3. **PR 세부 설정**:
   - 오른쪽 사이드바에서 리뷰어(Reviewers)를 지정할 수 있습니다.
   - 라벨(Labels)을 추가하여 PR의 유형이나 상태를 표시할 수 있습니다.
   - 마일스톤(Milestone)을 연결하여 프로젝트 진행 상황을 추적할 수 있습니다.

### Gitea에서 PR 리뷰하기

1. **코드 리뷰**:
   - PR 페이지에서 "Files changed" 탭을 클릭하여 변경된 파일을 확인합니다.
   - 특정 코드 라인에 커서를 올리면 "+" 버튼이 나타나며, 이를 클릭하여 해당 라인에 코멘트를 남길 수 있습니다.
   - 전체 PR에 대한 코멘트는 "Conversation" 탭에서 작성할 수 있습니다.

2. **리뷰 제출**:
   - 코드 검토가 완료되면 "Review changes" 버튼을 클릭합니다.
   - 코멘트만 남기거나, 변경 요청(Request changes), 또는 승인(Approve)을 선택할 수 있습니다.
   - 리뷰 코멘트를 작성하고 "Submit review" 버튼을 클릭합니다.

### Gitea에서 PR 병합하기

1. **병합 준비**:
   - 모든 리뷰가 완료되고 승인되었는지 확인합니다.
   - CI/CD 테스트가 있다면 모두 통과했는지 확인합니다.

2. **병합 방법 선택**:
   - "Merge pull request" 버튼을 클릭합니다.
   - 병합 방법을 선택할 수 있습니다:
     - **Regular merge**: 모든 커밋 이력을 유지하며 병합합니다.
     - **Squash and merge**: 모든 커밋을 하나로 압축하여 병합합니다.
     - **Rebase and merge**: 커밋을 재배치하여 선형 이력을 유지합니다.
   - 병합 커밋 메시지를 작성하고 "Confirm merge" 버튼을 클릭합니다.

3. **브랜치 정리**:
   - PR이 병합된 후 "Delete branch" 버튼을 클릭하여 사용이 끝난 feature 브랜치를 삭제할 수 있습니다.
   - 로컬에서도 브랜치를 정리합니다:
     ```bash
     git checkout main
     git pull
     git branch -d feature/my-new-feature
     ```

## 결론

PR(Pull Request)은 현대 소프트웨어 개발에서 코드 품질을 유지하고 팀 협업을 강화하는 필수적인 도구입니다. 코드 리뷰 프로세스를 통해 버그를 조기에 발견하고, 지식을 공유하며, 코드베이스의 일관성을 유지할 수 있습니다. 효과적인 PR 관행을 도입하면 개발 팀의 생산성과 코드 품질을 크게 향상시킬 수 있습니다.