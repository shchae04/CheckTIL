# 서버리스(Serverless)란?

요약: 서버 관리는 클라우드가 대신하고, 개발자는 비즈니스 로직(코드)과 설정에 집중하는 아키텍처/실행 모델. 주로 이벤트 기반으로 함수나 매니지드 서비스가 필요한 만큼 자동 확장되고, 사용한 만큼 과금된다.

## 핵심 개념
- 서버가 “없는 것”이 아니라, 서버 프로비저닝/패치/스케일링 등의 운영을 클라우드가 관리한다는 의미
- 대표 형태
  - FaaS(Function as a Service): AWS Lambda, Azure Functions, GCP Cloud Functions
  - BaaS(Backend as a Service): 인증, 스토리지, 메시징 등 매니지드 백엔드(AWS Cognito, Firebase Auth/Firestore, S3 등)
- 이벤트 기반 실행: HTTP 요청, 메시지/큐, 스케줄, 파일 업로드, DB 변경 등 트리거에 의해 함수가 실행
- 자동 확장/축소: 요청량에 따라 동적으로 인스턴스가 늘고 줄어듦
- 사용량 기반 과금: 실행 시간(ms/GB-s), 요청 수, 전송량 등 실 사용 기준으로 비용 청구

## 동작 방식(간단 흐름)
1) 트리거(예: API Gateway로 들어온 HTTP 요청) 발생
2) 플랫폼이 함수 컨테이너를 준비(콜드/웜 스타트)하고 코드 실행
3) 실행 완료 후 결과 반환 및 리소스 정리(비활성화, 유휴 상태 유지 가능)

## 장점
- 운영 부담 감소: 서버 패치/모니터링/스케일링 등 인프라 운영 업무 최소화
- 비용 효율: 유휴 리소스 비용 최소화, 피크 대비 오버프로비저닝 불필요
- 빠른 개발: 매니지드 서비스 조합으로 기능 출시 속도 향상
- 자동 확장: 트래픽 급증 상황 대응 용이

## 단점 및 주의사항
- 콜드 스타트: 최초 실행/유휴 후 재실행 시 지연 발생 가능(언어/메모리/네트워킹에 따라 영향 상이)
- 벤더 종속(Vendor lock-in): 특정 클라우드 서비스/이벤트 모델에 대한 의존 증가
- 제한 사항: 최대 실행 시간, 메모리/디스크 한도, 동시 실행 제한, VPC 연결 지연 등
- 관찰/디버깅 난이도: 분산 이벤트 기반이라 추적/로컬 재현이 어려울 수 있음
- 상태 관리: 함수는 무상태가 기본. 세션/상태는 외부 저장소(캐시/DB)에 위임 필요

## 적합한 사용 사례
- 이벤트 중심 워크로드: 이미지/영상 처리, 파일 업로드 후 후처리, 스트리밍 변환
- 백그라운드 작업: 스케줄링 크론, 알림 발송, 로그 집계, ETL/데이터 파이프라인
- API 백엔드: 저~중간 트래픽의 REST/GraphQL 엔드포인트
- 프로토타입/PoC: 빠른 실험과 기능 검증

## 안티패턴(지양)
- 장시간 실행/고정된 고성능 계산: 배치가 길고 지속적인 연산은 컨테이너/배치 서비스가 적합(ECS/EKS/Batch)
- 매우 낮은 지연이 필수인 요청: 콜드 스타트 영향이 치명적인 초저지연 시스템
- 복잡한 장기 연결(WebSocket 대규모 지속 연결)이나 고정 소켓 관리가 필요한 경우
- 거대한 단일 모놀리식 앱을 억지로 여러 람다로 분해(경계 불명확, 배포/관찰성 악화)

## 아키텍처 베스트 프랙티스
- 함수 경계 명확화: 단일 책임, 이벤트 스키마 계약 확립(예: JSON 스키마)
- 인프라 코드화: AWS CDK/Terraform/Serverless Framework로 IaC 관리
- 콜드 스타트 완화: 
  - 언어 선택(런타임 초기화가 빠른 언어), 메모리 상향으로 CPU 크레딧 증가, 프로비저닝드 컨커런시(AWS)
- 관찰성: 구조화 로깅, 분산 트레이싱(X-Ray/CloudTrace), 메트릭/알람 설정
- 보안: 최소 권한(IAM), 비밀 관리(Secrets Manager/SSM), VPC 필요성 신중 검토
- 로컬/통합 테스트 전략: SAM/LocalStack 등으로 개발 속도와 재현성 개선
- 데이터 저장소 선택: 무상태 함수 + 매니지드 DB/큐/캐시(DynamoDB/SQS/SNS/Redis 등)

## 주요 서비스 예시
- AWS: Lambda, API Gateway/ALB, S3, DynamoDB, SQS/SNS, EventBridge, Step Functions
- GCP: Cloud Functions/Run, Pub/Sub, Firestore, Cloud Scheduler
- Azure: Azure Functions, Event Grid, Cosmos DB, Storage Queue

## 비용/성능 고려
- 짧고 빈번한 요청: 서버리스가 비용/운영 효율 좋을 가능성 큼
- 지속적 고부하: 컨테이너/쿠버네티스가 더 경제적일 수 있음
- I/O 바운드: 메모리와 동시성 튜닝으로 처리량 개선 여지
- VPC 연결은 지연/콜드 스타트 비용 증가 요인

## 한 줄 정리
서버리스는 “서버 운영을 맡기고, 이벤트 기반으로 필요한 만큼만 쓰고 비용을 내는” 모델로, 운영 효율과 민첩성 측면에서 강력하지만 콜드 스타트/락인/제한 사항을 고려해 적절한 워크로드에 적용해야 한다.