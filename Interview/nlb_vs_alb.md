# NLB와 ALB의 차이점

NLB(Network Load Balancer)와 ALB(Application Load Balancer)는 AWS에서 제공하는 대표적인 로드 밸런서 서비스입니다. 두 서비스는 각각 다른 계층에서 동작하며 서로 다른 특징과 사용 사례를 가지고 있습니다.

## 1. 동작 계층

- **NLB (Network Load Balancer)**
  - OSI 모델의 4계층(전송 계층)에서 동작
  - TCP/UDP 프로토콜 기반으로 트래픽을 처리
  - IP 주소와 포트 번호를 기반으로 라우팅

- **ALB (Application Load Balancer)**
  - OSI 모델의 7계층(응용 계층)에서 동작
  - HTTP/HTTPS 프로토콜 기반으로 트래픽을 처리
  - 요청의 내용(헤더, URL 경로, 호스트 이름 등)을 기반으로 라우팅

## 2. 주요 특징

### NLB (Network Load Balancer)
- **성능**: 초당 수백만 개의 요청을 처리할 수 있는 높은 성능
- **지연 시간**: 매우 낮은 지연 시간 (ALB보다 빠름)
- **고정 IP**: 각 가용 영역마다 고정 IP 주소 제공
- **대상 그룹**: EC2 인스턴스, IP 주소, Lambda 함수 등을 대상으로 지정 가능
- **프로토콜**: TCP, UDP, TLS 지원
- **연결 유지**: 클라이언트와 대상 간의 연결을 유지

### ALB (Application Load Balancer)
- **고급 라우팅**: 경로 기반 라우팅, 호스트 기반 라우팅, HTTP 헤더 기반 라우팅 지원
- **콘텐츠 기반 라우팅**: 요청 내용에 따라 다른 대상 그룹으로 트래픽 분산
- **마이크로서비스 지원**: 컨테이너화된 애플리케이션과 마이크로서비스 아키텍처에 적합
- **보안 기능**: HTTPS 종료, 인증서 관리, 사용자 인증 지원
- **모니터링**: 상세한 액세스 로그와 CloudWatch 메트릭 제공
- **대상 그룹**: EC2 인스턴스, IP 주소, Lambda 함수, 컨테이너 등을 대상으로 지정 가능
- **프로토콜**: HTTP, HTTPS, HTTP/2, WebSocket 지원

## 3. 사용 사례

### NLB (Network Load Balancer) 사용 사례
- 매우 낮은 지연 시간이 필요한 애플리케이션
- TCP/UDP 기반 애플리케이션
- 고정 IP 주소가 필요한 경우
- 고성능이 요구되는 게임 서버, 금융 거래 시스템 등
- 화이트리스팅이 필요한 경우 (특정 IP만 허용)

### ALB (Application Load Balancer) 사용 사례
- HTTP/HTTPS 기반 웹 애플리케이션
- 마이크로서비스 아키텍처
- 컨테이너 기반 애플리케이션 (Docker, Kubernetes)
- 경로 기반 라우팅이 필요한 경우
- 여러 서비스를 단일 도메인에서 호스팅하는 경우
- 콘텐츠 기반 라우팅이 필요한 경우

## 4. 비용 비교

일반적으로 ALB가 NLB보다 비용이 더 높은 편입니다. 이는 ALB가 더 많은 기능을 제공하고 요청 내용을 검사하는 추가 작업을 수행하기 때문입니다.

## 5. 요약 비교표

| 특징 | NLB (Network Load Balancer) | ALB (Application Load Balancer) |
|------|---------------------------|--------------------------------|
| 계층 | 4계층 (전송 계층) | 7계층 (응용 계층) |
| 프로토콜 | TCP, UDP, TLS | HTTP, HTTPS, HTTP/2, WebSocket |
| 라우팅 기준 | IP 주소, 포트 | URL 경로, 호스트 이름, HTTP 헤더, 쿼리 문자열 |
| 지연 시간 | 매우 낮음 | 낮음 (NLB보다는 높음) |
| 고정 IP | 지원 | 미지원 (DNS 사용) |
| 연결 유지 | 클라이언트-대상 간 연결 유지 | 클라이언트-로드 밸런서, 로드 밸런서-대상 간 별도 연결 |
| 보안 기능 | 기본적인 TLS 지원 | 고급 HTTPS 기능, 인증서 관리, 사용자 인증 |
| 모니터링 | 기본 CloudWatch 메트릭 | 상세 액세스 로그, 고급 CloudWatch 메트릭 |
| 비용 | 상대적으로 낮음 | 상대적으로 높음 |

## 결론

NLB와 ALB는 각각 다른 용도로 설계되었으며, 애플리케이션의 요구사항에 따라 적절한 로드 밸런서를 선택해야 합니다. 낮은 지연 시간과 고정 IP가 필요한 TCP/UDP 기반 애플리케이션에는 NLB가 적합하고, HTTP/HTTPS 기반의 웹 애플리케이션이나 마이크로서비스 아키텍처에는 ALB가 더 적합합니다. 두 로드 밸런서를 함께 사용하여 각각의 장점을 활용하는 아키텍처도 가능합니다.