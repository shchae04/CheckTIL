# TDD (Test Driven Development)

TDD는 **Test Driven Development**(테스트 주도 개발)의 약자로, 코드를 작성하기 전에 먼저 테스트 케이스를 작성하여 개발을 진행하는 방법론입니다.  
TDD는 **Red-Green-Refactor** 사이클을 따르며, 이를 통해 코드의 안정성과 품질을 높일 수 있습니다.

---

## TDD란?

- **테스트 우선 개발**: 기능 구현 전에 테스트 코드를 작성하여 요구사항을 명확하게 정의합니다.
- **빠른 피드백**: 기능 추가 시 테스트를 실행하여 즉시 결과를 확인할 수 있어, 버그를 조기에 발견하고 수정할 수 있습니다.
- **안정성과 유지보수성 향상**: 지속적인 리팩토링과 테스트를 통해 코드 품질을 개선하고, 변경에 유연한 코드를 작성할 수 있습니다.

---

## Red-Green-Refactor 사이클

### 1. Red (테스트 실패)
- **테스트 케이스 작성**: 아직 구현되지 않은 기능에 대한 테스트 코드를 작성합니다.
- **실패 확인**: 테스트를 실행하면 기능이 구현되지 않아 실패하는 것을 확인합니다.

### 2. Green (테스트 통과)
- **최소한의 코드 구현**: 테스트를 통과시키기 위해 최소한의 코드를 작성합니다.
- **기능 확인**: 테스트가 통과되면 기본 기능이 정상적으로 동작함을 확인할 수 있습니다.

### 3. Refactor (코드 개선)
- **리팩토링**: 중복 제거, 가독성 향상, 성능 개선 등을 위해 코드를 정리합니다.
- **안정성 확인**: 리팩토링 후에도 모든 테스트가 통과하는지 재확인하여 기능이 변경되지 않았음을 보장합니다.

> **Tip:** 리팩토링은 코드의 외부 동작(기능)을 변경하지 않으면서 내부 구조를 개선하는 과정입니다.

---

## TDD 예제

> **주의:** 간단한 기능부터 시작하여 점차 테스트 케이스를 확장함으로써 코드의 범용성을 높이고, 잠재적 버그를 방지할 수 있습니다.

### 1. Red: 실패하는 테스트 작성

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class CalculatorTest {

    @Test
    public void testAdd() {
        Calculator calc = new Calculator();
        int result = calc.add(2, 3);
        assertEquals(5, result);
    }
}
```

위 테스트는 아직 `Calculator` 클래스가 구현되지 않아 실패합니다.

### 2. Green: 최소한의 코드 구현

```java
public class Calculator {
    public int add(int a, int b) {
        return a + b;  // 테스트를 통과할 수 있도록 최소한의 구현
    }
}
```

테스트를 실행하면, `add()` 메서드가 올바른 결과를 반환하여 테스트가 통과합니다.

### 3. Refactor: 코드 개선

리팩토링 단계에서는 **중복 제거**, **가독성 향상** 등을 통해 코드를 정리합니다.  
기존 테스트가 모두 통과하는지 **재확인**합니다.

---

## TDD의 장점

1. **빠른 피드백**
    - 개발 과정에서 즉시 테스트 결과를 확인할 수 있어, 문제를 조기에 발견할 수 있습니다.

2. **높은 코드 품질**
    - 리팩토링을 통해 지속적으로 코드를 개선하며, 유지보수가 용이해집니다.

3. **명확한 요구사항 정의**
    - 테스트 케이스를 먼저 작성함으로써 요구사항을 구체화할 수 있습니다.

4. **리그레션 방지**
    - 테스트 스위트를 통해 기존 기능이 의도치 않게 변경되는 것을 방지할 수 있습니다.

---

## TDD vs None TDD 개발 비교

| 항목 | TDD (Test Driven Development) | 비 TDD 개발 |
|------|------------------------------|-------------|
| **개발 순서** | 테스트 작성 → 코드 구현 → 리팩토링 | 기능 구현 → 테스트 작성 (사후 테스트) |
| **버그 예방** | 초기 테스트 작성으로 버그를 미리 방지 | 기능 구현 후 테스트 시 버그 발견 가능성 증가 |
| **코드 품질** | 리팩토링을 통한 지속적 개선으로 높은 코드 품질 유지 | 테스트 미흡 시 코드 품질 저하 가능성 있음 |
| **개발 초기 속도** | 테스트 작성에 따른 초기 시간 투자 필요 | 초기 기능 구현이 빠르지만, 유지보수 비용 증가 가능 |
| **유지보수 용이성** | 테스트가 코드 변경 시 안정성을 보장하여 유지보수에 유리 | 변경 시 의도치 않은 부작용 발생 가능성 높음 |

---

## 결론

TDD를 통해 개발자는 기능 구현 전 **요구사항을 명확히** 하고,  
코드의 **안정성과 유지보수성**을 높일 수 있습니다.

처음에는 테스트 케이스 작성에 추가적인 노력이 필요하지만,  
장기적으로는 보다 **견고한 소프트웨어**를 개발하는 데 큰 도움이 됩니다.