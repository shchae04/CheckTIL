# 명령어 파이프라이닝 (Command Pipelining)

## 개요

명령어 파이프라이닝(Command Pipelining)은 운영체제의 쉘(Shell)에서 여러 명령어를 연결하여 실행하는 기능입니다. 파이프(`|`) 기호를 사용하여 한 명령어의 출력을 다른 명령어의 입력으로 직접 전달할 수 있습니다. 이를 통해 복잡한 작업을 여러 간단한 명령어로 분해하고 연결하여 효율적으로 처리할 수 있습니다.

## 작동 원리

파이프라이닝의 기본 원리는 다음과 같습니다:

1. 첫 번째 명령어가 실행되어 표준 출력(stdout)으로 결과를 생성합니다.
2. 파이프(`|`) 기호는 이 출력을 두 번째 명령어의 표준 입력(stdin)으로 리다이렉션합니다.
3. 두 번째 명령어는 이 입력을 처리하고 결과를 생성합니다.
4. 이 과정은 파이프라인의 모든 명령어에 대해 순차적으로 진행됩니다.

운영체제는 파이프라인의 각 명령어를 별도의 프로세스로 실행하고, 이들 사이에 파이프라는 특별한 종류의 파일을 생성하여 데이터를 전달합니다.

## 기본 문법

```bash
command1 | command2 | command3 | ... | commandN
```

여기서:
- `command1`의 출력은 `command2`의 입력이 됩니다.
- `command2`의 출력은 `command3`의 입력이 됩니다.
- 이런 식으로 계속 연결됩니다.

## 예제

### 예제 1: 파일 내용 검색 및 계수

```bash
cat file.txt | grep "검색어" | wc -l
```

이 명령어는:
1. `cat file.txt`로 파일의 내용을 출력합니다.
2. `grep "검색어"`로 "검색어"가 포함된 줄만 필터링합니다.
3. `wc -l`로 필터링된 줄의 수를 계산합니다.

### 예제 2: 디렉토리 내 파일 정렬 및 표시

```bash
ls -l | sort -k5 -n | head -n 10
```

이 명령어는:
1. `ls -l`로 현재 디렉토리의 파일 목록을 자세히 표시합니다.
2. `sort -k5 -n`으로 파일 크기(5번째 열)를 기준으로 정렬합니다.
3. `head -n 10`으로 상위 10개 항목만 표시합니다.

### 예제 3: 프로세스 모니터링

```bash
ps aux | grep "프로세스명" | grep -v grep
```

이 명령어는:
1. `ps aux`로 모든 실행 중인 프로세스를 표시합니다.
2. `grep "프로세스명"`으로 특정 프로세스만 필터링합니다.
3. `grep -v grep`으로 grep 명령어 자체를 결과에서 제외합니다.

## 장점

1. **모듈성**: 복잡한 작업을 작은 단위로 분해할 수 있습니다.
2. **재사용성**: 기존 명령어를 조합하여 새로운 기능을 만들 수 있습니다.
3. **효율성**: 중간 결과를 파일에 저장하지 않고 직접 전달하므로 디스크 I/O가 감소합니다.
4. **간결성**: 여러 명령어를 한 줄로 연결하여 스크립트를 간결하게 유지할 수 있습니다.

## 단점

1. **디버깅 어려움**: 파이프라인이 길어지면 어느 부분에서 오류가 발생했는지 파악하기 어려울 수 있습니다.
2. **메모리 사용**: 대용량 데이터를 처리할 때 파이프를 통해 전체 데이터가 메모리를 통과해야 합니다.
3. **순차적 실행**: 파이프라인의 각 단계는 이전 단계의 출력에 의존하므로 병렬 처리가 제한됩니다.

## 고급 파이프라이닝 기법

### 명령어 그룹화

괄호를 사용하여 여러 명령어를 그룹화할 수 있습니다:

```bash
(command1; command2) | command3
```

### 명령어 치환

백틱(`) 또는 `$()`를 사용하여 명령어의 출력을 다른 명령어의 인수로 사용할 수 있습니다:

```bash
echo "오늘 날짜: $(date)"
```

### 리다이렉션과 함께 사용

파이프라인과 리다이렉션을 함께 사용하여 더 복잡한 작업을 수행할 수 있습니다:

```bash
command1 | command2 > output.txt
```

## 결론

명령어 파이프라이닝은 유닉스/리눅스 쉘의 강력한 기능으로, 간단한 명령어들을 조합하여 복잡한 작업을 수행할 수 있게 해줍니다. 이는 "한 가지 일을 잘하는 작은 프로그램을 만들고 이들을 조합하여 사용한다"는 유닉스 철학을 잘 보여주는 예입니다. 파이프라이닝을 효과적으로 활용하면 명령줄에서의 생산성을 크게 향상시킬 수 있습니다.